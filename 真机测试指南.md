# YanBao AI 真机测试指南

## 开发服务器状态

✅ **Metro Bundler**: 运行中（端口8081）  
✅ **API服务器**: 运行中（端口3000）  
✅ **TypeScript编译**: 无错误  
✅ **依赖检查**: 正常  

**预览URL**: https://8081-ib6izy3z9yindu5faxuai-d2976e09.sg1.manus.computer

---

## 真机测试方法

### 方法一：使用Expo Go（推荐用于快速测试）

#### Android设备
1. 在Android设备上安装Expo Go
   ```
   Google Play Store搜索"Expo Go"并安装
   ```

2. 获取QR码
   ```bash
   cd /home/ubuntu/yanbao-eas-build
   pnpm qr
   ```

3. 使用Expo Go扫描QR码
   - 打开Expo Go应用
   - 点击"Scan QR Code"
   - 扫描终端显示的QR码

4. 等待应用加载
   - Metro bundler会自动打包应用
   - 首次加载可能需要1-2分钟

#### iOS设备
1. 在iOS设备上安装Expo Go
   ```
   App Store搜索"Expo Go"并安装
   ```

2. 使用相机扫描QR码
   - 打开iOS相机应用
   - 扫描QR码
   - 点击通知打开Expo Go

---

### 方法二：构建开发版APK（推荐用于完整功能测试）

#### 构建开发版APK
```bash
cd /home/ubuntu/yanbao-eas-build
eas build --profile development --platform android
```

#### 安装到Android设备
1. 下载构建完成的APK
2. 通过USB传输到Android设备
3. 在设备上安装APK
4. 允许"未知来源"安装权限

---

## 需要在真机上测试的功能

### 1. 地图功能（react-native-maps）

**测试页面**: 机位推荐Tab

**测试项目**:
- [ ] 地图是否正常加载
- [ ] 40个机位标注是否显示
- [ ] 点击标注是否弹出详情卡片
- [ ] 一键导航是否跳转到Google Maps/Apple Maps
- [ ] 城市筛选器是否正常工作
- [ ] 标签筛选器是否正常工作

**预期结果**:
- 地图显示正常，标注清晰可见
- 详情卡片显示评分、照片数、距离、描述
- 导航按钮跳转到原生地图应用

---

### 2. 相机功能（expo-camera）

**测试页面**: 相机Tab

**测试项目**:
- [ ] 相机预览是否正常显示
- [ ] 拍照功能是否正常
- [ ] 专业模式是否可用（ISO/快门/对焦/白平衡）
- [ ] 峰值对焦是否正常显示
- [ ] 网格线/水平仪是否显示
- [ ] 照片是否保存到相册

**预期结果**:
- 相机预览流畅（60fps）
- 拍照响应快速（<500ms）
- 专业模式参数调节生效
- 峰值对焦高亮显示清晰

---

### 3. 相册功能（expo-media-library）

**测试页面**: 相册Tab

**测试项目**:
- [ ] 是否读取到系统照片
- [ ] FlashList滚动是否流畅
- [ ] 照片批量选择是否正常
- [ ] 一键成片按钮是否显示
- [ ] AI影集编辑器是否打开

**预期结果**:
- 显示最近500张照片
- 滚动流畅（60fps）
- 选中状态高亮显示（紫色覆盖+勾选图标）
- 一键成片按钮显示选中数量

---

### 4. LUT预设功能

**测试页面**: 编辑Tab

**测试项目**:
- [ ] 12种LUT预设是否显示
- [ ] 点击预设是否实时应用
- [ ] 预设强度滑块是否正常
- [ ] 预设收藏功能是否正常
- [ ] 预设分类筛选是否正常

**预期结果**:
- 预设切换流畅（<100ms）
- 强度调节实时生效
- 收藏的预设排在最前面

---

### 5. 定位功能（expo-location）

**测试页面**: 机位推荐Tab

**测试项目**:
- [ ] 是否获取到当前位置
- [ ] 机位是否按距离排序
- [ ] 距离计算是否准确

**预期结果**:
- 首次打开时请求定位权限
- 权限授予后显示当前位置
- 机位按距离从近到远排序

---

### 6. 1017告白彩蛋

**测试页面**: 设置Tab

**测试项目**:
- [ ] 连续点击Logo 5次是否触发彩蛋
- [ ] 彩蛋动画是否流畅
- [ ] 震动反馈是否正常
- [ ] 关闭按钮是否正常

**预期结果**:
- 彩蛋以弹簧动画弹出
- 触发时有震动反馈
- 渐变背景+毛玻璃效果显示正常

---

### 7. 存储统计功能（expo-device + expo-file-system）

**测试页面**: 设置Tab

**测试项目**:
- [ ] 是否显示真实存储占用
- [ ] 是否显示真实照片数量
- [ ] 统计数据是否准确

**预期结果**:
- 显示设备总存储和已用存储
- 显示系统照片总数
- 数据与系统设置一致

---

## Web预览中无法工作的原生模块列表

### 1. react-native-maps
**错误**: `codegenNativeComponent is not a function`  
**原因**: 需要原生模块支持，Web不支持  
**解决方案**: 仅在真机上测试

### 2. expo-camera
**限制**: Web使用WebRTC，功能有限  
**解决方案**: 真机测试专业模式和峰值对焦

### 3. expo-media-library
**限制**: Web无法访问系统相册  
**解决方案**: 真机测试相册读取功能

### 4. expo-location
**限制**: Web定位精度较低  
**解决方案**: 真机测试GPS定位和距离计算

### 5. expo-haptics
**限制**: Web不支持震动反馈  
**解决方案**: 真机测试1017彩蛋震动效果

### 6. expo-device
**限制**: Web无法获取设备信息  
**解决方案**: 真机测试存储统计功能

---

## 测试检查表

### 基础功能
- [ ] 应用启动正常
- [ ] 底部Tab导航正常
- [ ] 页面切换流畅
- [ ] 无崩溃或闪退

### 核心功能
- [ ] 相机拍照功能正常
- [ ] 地图标注显示正常
- [ ] LUT预设应用正常
- [ ] 相册读取正常
- [ ] 一键成片功能正常

### 交互体验
- [ ] 滚动流畅（60fps）
- [ ] 按钮响应快速
- [ ] 动画效果流畅
- [ ] 震动反馈正常

### 权限请求
- [ ] 相机权限请求正常
- [ ] 定位权限请求正常
- [ ] 相册权限请求正常
- [ ] 权限描述为简体中文

---

## 常见问题

### Q: Expo Go无法连接到开发服务器
**A**: 确保手机和电脑在同一WiFi网络下，或使用Tunnel模式：
```bash
npx expo start --tunnel
```

### Q: 地图不显示
**A**: 这是正常的，react-native-maps在Web预览中不工作，需要在真机上测试。

### Q: 相册显示为空
**A**: Web预览无法访问系统相册，需要在真机上测试。

### Q: 应用加载缓慢
**A**: 首次加载需要下载所有资源，后续加载会更快。可以使用开发版APK获得更好的性能。

---

## 性能基准

### 启动时间
- **冷启动**: <3秒
- **热启动**: <1秒

### 相机性能
- **预览帧率**: 60fps
- **拍照延迟**: <500ms

### 相册性能
- **滚动帧率**: 60fps（FlashList）
- **照片加载**: <100ms

### LUT预设
- **切换延迟**: <100ms
- **强度调节**: 实时响应

---

## 测试报告模板

```markdown
## YanBao AI 真机测试报告

**测试日期**: 2025-01-12  
**测试设备**: [设备型号]  
**Android版本**: [版本号]  
**测试版本**: v2.1.0-Ultimate

### 测试结果

#### 地图功能
- [ ] 通过 / [ ] 失败
- 备注: 

#### 相机功能
- [ ] 通过 / [ ] 失败
- 备注: 

#### 相册功能
- [ ] 通过 / [ ] 失败
- 备注: 

#### LUT预设
- [ ] 通过 / [ ] 失败
- 备注: 

#### 1017彩蛋
- [ ] 通过 / [ ] 失败
- 备注: 

### 发现的问题
1. 
2. 
3. 

### 改进建议
1. 
2. 
3. 
```

---

**准备就绪，可开始真机测试！** 📱
